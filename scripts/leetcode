base_leetcode_dir="$HOME/coding/dev/leetcode"

read "number?What is the problem number? (e.g., 217) "
if [[ -z $number ]]; then
    echo "Number is required. Exiting"
    return 1
fi

read "problem?What is the problem name in snake_case? (e.g., valid_anagram) "
if [[ -z $problem ]]; then
    echo "Problem is required. Exiting"
    return 1
fi

dir_name=$(printf "%d_%s" "$number" "$problem")

full_path="$base_leetcode_dir/$dir_name"

mkdir -p "$full_path" 
touch "$full_path/main.py"

selected_name="leetcode"
# Create or attach to the leetcode session
if ! tmux has-session -t=$selected_name 2> /dev/null; then
    tmux new-session -s $selected_name -n "$dir_name" -c $full_path -d
else
    tmux new-window -t "$selected_name": -n "$dir_name" -c "$full_path"
fi

if [[ -z $TMUX ]]; then
    tmux attach-session -t $selected_name
else
    tmux switch-client -t $selected_name
fi
